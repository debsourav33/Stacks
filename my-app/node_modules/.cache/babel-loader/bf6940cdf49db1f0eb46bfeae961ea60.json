{"ast":null,"code":"import axios from \"axios\";\nimport AuthenticationService from \"../../components/shared/AuthenticationService\";\nexport default class HeapOverFlowService {\n  constructor() {\n    if (!HeapOverFlowService.interceptorInitialized) {\n      this.setupAxiosInterceptor(HeapOverFlowService.authenticationUserName, HeapOverFlowService.authenticationPassword);\n    }\n  }\n\n  setupAxiosInterceptor(username, password) {\n    let basicAuthHeader = \"Basic \" + window.btoa(username + ':' + password);\n    axios.interceptors.request.use(config => {\n      if (AuthenticationService.isLoggedIn()) {\n        config.headers.authorization = basicAuthHeader;\n        HeapOverFlowService.interceptorInitialized = true;\n        console.log(\"Basic Auth Set\");\n      }\n\n      return config;\n    }, null, {\n      synchronous: true\n    });\n    console.log(\"Basic Auth Inclusion Performed\");\n  }\n\n  retrieveAllQuestions() {\n    return axios.get(HeapOverFlowService.questionUrl);\n  }\n\n  deleteQuestion(id) {\n    let user = AuthenticationService.getLoggedInUserName();\n    let url = HeapOverFlowService.baseUrl + \"/\" + user + \"/questions/\" + id;\n    console.log(`Hitting: ${url}`);\n    return axios.delete(url);\n  }\n\n  postQuestion(question) {\n    let user = AuthenticationService.getLoggedInUserName();\n    let url = HeapOverFlowService.baseUrl + \"/\" + user + \"/questions\";\n    console.log(`Hitting: ${url}`);\n    return axios.post(url, question);\n  }\n\n}\nHeapOverFlowService.baseUrl = \"http://localhost:8080\";\nHeapOverFlowService.questionUrl = HeapOverFlowService.baseUrl + \"/questions\";\nHeapOverFlowService.interceptorInitialized = false;\nHeapOverFlowService.authenticationUserName = \"heaps\";\nHeapOverFlowService.authenticationPassword = \"go123\";","map":{"version":3,"sources":["C:/Users/sourav.deb/Stacks/my-app/src/api/heapoverflow/HeapOverFlowService.js"],"names":["axios","AuthenticationService","HeapOverFlowService","constructor","interceptorInitialized","setupAxiosInterceptor","authenticationUserName","authenticationPassword","username","password","basicAuthHeader","window","btoa","interceptors","request","use","config","isLoggedIn","headers","authorization","console","log","synchronous","retrieveAllQuestions","get","questionUrl","deleteQuestion","id","user","getLoggedInUserName","url","baseUrl","delete","postQuestion","question","post"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,qBAAP,MAAkC,+CAAlC;AAEA,eAAe,MAAMC,mBAAN,CAAyB;AAOpCC,EAAAA,WAAW,GAAE;AACT,QAAG,CAACD,mBAAmB,CAACE,sBAAxB,EAA+C;AAC3C,WAAKC,qBAAL,CAA2BH,mBAAmB,CAACI,sBAA/C,EAAsEJ,mBAAmB,CAACK,sBAA1F;AACH;AACJ;;AAEDF,EAAAA,qBAAqB,CAACG,QAAD,EAAWC,QAAX,EAAoB;AACrC,QAAIC,eAAe,GAAG,WAAWC,MAAM,CAACC,IAAP,CAAYJ,QAAQ,GAAG,GAAX,GAAiBC,QAA7B,CAAjC;AACAT,IAAAA,KAAK,CAACa,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACKC,MAAD,IAAY;AACR,UAAGf,qBAAqB,CAACgB,UAAtB,EAAH,EAAsC;AAClCD,QAAAA,MAAM,CAACE,OAAP,CAAeC,aAAf,GAA+BT,eAA/B;AACAR,QAAAA,mBAAmB,CAACE,sBAApB,GAA6C,IAA7C;AACAgB,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH;;AAED,aAAOL,MAAP;AACH,KATL,EASO,IATP,EASa;AAAEM,MAAAA,WAAW,EAAE;AAAf,KATb;AAWAF,IAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACH;;AAEDE,EAAAA,oBAAoB,GAAE;AAClB,WAAOvB,KAAK,CAACwB,GAAN,CAAUtB,mBAAmB,CAACuB,WAA9B,CAAP;AACH;;AAEDC,EAAAA,cAAc,CAACC,EAAD,EAAI;AACd,QAAIC,IAAI,GAAG3B,qBAAqB,CAAC4B,mBAAtB,EAAX;AACA,QAAIC,GAAG,GAAG5B,mBAAmB,CAAC6B,OAApB,GAA8B,GAA9B,GAAoCH,IAApC,GAA2C,aAA3C,GAA0DD,EAApE;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAa,YAAWS,GAAI,EAA5B;AACA,WAAO9B,KAAK,CAACgC,MAAN,CAAaF,GAAb,CAAP;AACH;;AAEDG,EAAAA,YAAY,CAACC,QAAD,EAAU;AAClB,QAAIN,IAAI,GAAG3B,qBAAqB,CAAC4B,mBAAtB,EAAX;AACA,QAAIC,GAAG,GAAG5B,mBAAmB,CAAC6B,OAApB,GAA8B,GAA9B,GAAoCH,IAApC,GAA2C,YAArD;AACAR,IAAAA,OAAO,CAACC,GAAR,CAAa,YAAWS,GAAI,EAA5B;AACA,WAAO9B,KAAK,CAACmC,IAAN,CAAWL,GAAX,EAAeI,QAAf,CAAP;AACH;;AA7CmC;AAAnBhC,mB,CACV6B,O,GAAU,uB;AADA7B,mB,CAEVuB,W,GAAcvB,mBAAmB,CAAC6B,OAApB,GAA8B,Y;AAFlC7B,mB,CAGVE,sB,GAAyB,K;AAHfF,mB,CAIVI,sB,GAAyB,O;AAJfJ,mB,CAKVK,sB,GAAyB,O","sourcesContent":["import axios from \"axios\"\r\nimport AuthenticationService from \"../../components/shared/AuthenticationService\";\r\n\r\nexport default class HeapOverFlowService{\r\n    static baseUrl = \"http://localhost:8080\"\r\n    static questionUrl = HeapOverFlowService.baseUrl + \"/questions\"\r\n    static interceptorInitialized = false;\r\n    static authenticationUserName = \"heaps\";\r\n    static authenticationPassword = \"go123\";\r\n\r\n    constructor(){\r\n        if(!HeapOverFlowService.interceptorInitialized){\r\n            this.setupAxiosInterceptor(HeapOverFlowService.authenticationUserName,HeapOverFlowService.authenticationPassword);\r\n        }\r\n    }\r\n\r\n    setupAxiosInterceptor(username, password){\r\n        let basicAuthHeader = \"Basic \" + window.btoa(username + ':' + password);\r\n        axios.interceptors.request.use(\r\n            (config) => {\r\n                if(AuthenticationService.isLoggedIn()){\r\n                    config.headers.authorization = basicAuthHeader;\r\n                    HeapOverFlowService.interceptorInitialized = true;\r\n                    console.log(\"Basic Auth Set\");\r\n                }\r\n                \r\n                return config;\r\n            }, null, { synchronous: true }\r\n        );\r\n        console.log(\"Basic Auth Inclusion Performed\");\r\n    }\r\n\r\n    retrieveAllQuestions(){\r\n        return axios.get(HeapOverFlowService.questionUrl);\r\n    }\r\n\r\n    deleteQuestion(id){\r\n        let user = AuthenticationService.getLoggedInUserName();\r\n        let url = HeapOverFlowService.baseUrl + \"/\" + user + \"/questions/\"+ id;\r\n        console.log(`Hitting: ${url}`);\r\n        return axios.delete(url);\r\n    }\r\n\r\n    postQuestion(question){\r\n        let user = AuthenticationService.getLoggedInUserName();\r\n        let url = HeapOverFlowService.baseUrl + \"/\" + user + \"/questions\";\r\n        console.log(`Hitting: ${url}`);\r\n        return axios.post(url,question);\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}