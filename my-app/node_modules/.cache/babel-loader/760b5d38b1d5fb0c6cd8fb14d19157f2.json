{"ast":null,"code":"import axios from \"axios\";\nimport AuthenticationService from \"../../components/shared/AuthenticationService\";\nexport default class HeapOverFlowService {\n  constructor() {\n    this.interceptorInitialized = false;\n\n    if (!this.interceptorInitialized) {\n      this.setupAxiosInterceptor(HeapOverFlowService.authenticationUserName, HeapOverFlowService.authenticationPassword);\n    }\n  }\n\n  authenticate() {\n    return axios.get(HeapOverFlowService.baseUrl + \"/basicauth\");\n  }\n\n  setupAxiosInterceptor(username, password) {\n    let basicAuthHeader = \"Basic \" + window.btoa(username + ':' + password);\n    axios.interceptors.request.use(config => {\n      if (AuthenticationService.isLoggedIn()) {\n        config.headers.authorization = basicAuthHeader;\n        this.interceptorInitialized = true;\n        console.log(\"Basic Auth Set: \" + basicAuthHeader);\n      }\n\n      return config;\n    }, null, {\n      synchronous: true\n    });\n    console.log(\"Basic Auth Inclusion Performed\");\n  }\n\n  retrieveAllQuestions() {\n    return axios.get(HeapOverFlowService.questionUrl);\n  }\n\n  deleteQuestion(id) {\n    let user = AuthenticationService.getLoggedInUserName();\n    let url = HeapOverFlowService.baseUrl + \"/\" + user + \"/questions/\" + id;\n    console.log(`Hitting: ${url}`);\n    return axios.delete(url);\n  }\n\n  postQuestion(question) {\n    let user = AuthenticationService.getLoggedInUserName();\n    let url = HeapOverFlowService.baseUrl + \"/\" + user + \"/questions\";\n    console.log(`Hitting: ${url}`);\n    return axios.post(url, question);\n  }\n\n}\nHeapOverFlowService.baseUrl = \"http://localhost:8080\";\nHeapOverFlowService.questionUrl = HeapOverFlowService.baseUrl + \"/questions\";\nHeapOverFlowService.authenticationUserName = \"heaps\";\nHeapOverFlowService.authenticationPassword = \"go123\";","map":{"version":3,"sources":["C:/Users/sourav.deb/Stacks/my-app/src/api/heapoverflow/HeapOverFlowService.js"],"names":["axios","AuthenticationService","HeapOverFlowService","constructor","interceptorInitialized","setupAxiosInterceptor","authenticationUserName","authenticationPassword","authenticate","get","baseUrl","username","password","basicAuthHeader","window","btoa","interceptors","request","use","config","isLoggedIn","headers","authorization","console","log","synchronous","retrieveAllQuestions","questionUrl","deleteQuestion","id","user","getLoggedInUserName","url","delete","postQuestion","question","post"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,qBAAP,MAAkC,+CAAlC;AAEA,eAAe,MAAMC,mBAAN,CAAyB;AAQpCC,EAAAA,WAAW,GAAE;AAAA,SAFbC,sBAEa,GAFY,KAEZ;;AACT,QAAG,CAAC,KAAKA,sBAAT,EAAgC;AAC5B,WAAKC,qBAAL,CAA2BH,mBAAmB,CAACI,sBAA/C,EAAsEJ,mBAAmB,CAACK,sBAA1F;AACH;AACJ;;AAEDC,EAAAA,YAAY,GAAE;AACV,WAAOR,KAAK,CAACS,GAAN,CAAUP,mBAAmB,CAACQ,OAApB,GAA4B,YAAtC,CAAP;AACH;;AAEDL,EAAAA,qBAAqB,CAACM,QAAD,EAAWC,QAAX,EAAoB;AACrC,QAAIC,eAAe,GAAG,WAAWC,MAAM,CAACC,IAAP,CAAYJ,QAAQ,GAAG,GAAX,GAAiBC,QAA7B,CAAjC;AACAZ,IAAAA,KAAK,CAACgB,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACKC,MAAD,IAAY;AACR,UAAGlB,qBAAqB,CAACmB,UAAtB,EAAH,EAAsC;AAClCD,QAAAA,MAAM,CAACE,OAAP,CAAeC,aAAf,GAA+BT,eAA/B;AACA,aAAKT,sBAAL,GAA8B,IAA9B;AACAmB,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAoBX,eAAhC;AACH;;AAED,aAAOM,MAAP;AACH,KATL,EASO,IATP,EASa;AAAEM,MAAAA,WAAW,EAAE;AAAf,KATb;AAWAF,IAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACH;;AAEDE,EAAAA,oBAAoB,GAAE;AAClB,WAAO1B,KAAK,CAACS,GAAN,CAAUP,mBAAmB,CAACyB,WAA9B,CAAP;AACH;;AAEDC,EAAAA,cAAc,CAACC,EAAD,EAAI;AACd,QAAIC,IAAI,GAAG7B,qBAAqB,CAAC8B,mBAAtB,EAAX;AACA,QAAIC,GAAG,GAAG9B,mBAAmB,CAACQ,OAApB,GAA8B,GAA9B,GAAoCoB,IAApC,GAA2C,aAA3C,GAA0DD,EAApE;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAa,YAAWQ,GAAI,EAA5B;AACA,WAAOhC,KAAK,CAACiC,MAAN,CAAaD,GAAb,CAAP;AACH;;AAEDE,EAAAA,YAAY,CAACC,QAAD,EAAU;AAClB,QAAIL,IAAI,GAAG7B,qBAAqB,CAAC8B,mBAAtB,EAAX;AACA,QAAIC,GAAG,GAAG9B,mBAAmB,CAACQ,OAApB,GAA8B,GAA9B,GAAoCoB,IAApC,GAA2C,YAArD;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAa,YAAWQ,GAAI,EAA5B;AACA,WAAOhC,KAAK,CAACoC,IAAN,CAAWJ,GAAX,EAAeG,QAAf,CAAP;AACH;;AAlDmC;AAAnBjC,mB,CACVQ,O,GAAU,uB;AADAR,mB,CAEVyB,W,GAAczB,mBAAmB,CAACQ,OAApB,GAA8B,Y;AAFlCR,mB,CAGVI,sB,GAAyB,O;AAHfJ,mB,CAIVK,sB,GAAyB,O","sourcesContent":["import axios from \"axios\"\r\nimport AuthenticationService from \"../../components/shared/AuthenticationService\";\r\n\r\nexport default class HeapOverFlowService{\r\n    static baseUrl = \"http://localhost:8080\"\r\n    static questionUrl = HeapOverFlowService.baseUrl + \"/questions\"\r\n    static authenticationUserName = \"heaps\";\r\n    static authenticationPassword = \"go123\";\r\n\r\n    interceptorInitialized = false;\r\n\r\n    constructor(){\r\n        if(!this.interceptorInitialized){\r\n            this.setupAxiosInterceptor(HeapOverFlowService.authenticationUserName,HeapOverFlowService.authenticationPassword);\r\n        }\r\n    }\r\n\r\n    authenticate(){\r\n        return axios.get(HeapOverFlowService.baseUrl+\"/basicauth\");\r\n    }\r\n\r\n    setupAxiosInterceptor(username, password){\r\n        let basicAuthHeader = \"Basic \" + window.btoa(username + ':' + password);\r\n        axios.interceptors.request.use(\r\n            (config) => {\r\n                if(AuthenticationService.isLoggedIn()){\r\n                    config.headers.authorization = basicAuthHeader;\r\n                    this.interceptorInitialized = true;\r\n                    console.log(\"Basic Auth Set: \"+ basicAuthHeader);\r\n                }\r\n                \r\n                return config;\r\n            }, null, { synchronous: true }\r\n        );\r\n        console.log(\"Basic Auth Inclusion Performed\");\r\n    }\r\n\r\n    retrieveAllQuestions(){\r\n        return axios.get(HeapOverFlowService.questionUrl);\r\n    }\r\n\r\n    deleteQuestion(id){\r\n        let user = AuthenticationService.getLoggedInUserName();\r\n        let url = HeapOverFlowService.baseUrl + \"/\" + user + \"/questions/\"+ id;\r\n        console.log(`Hitting: ${url}`);\r\n        return axios.delete(url);\r\n    }\r\n\r\n    postQuestion(question){\r\n        let user = AuthenticationService.getLoggedInUserName();\r\n        let url = HeapOverFlowService.baseUrl + \"/\" + user + \"/questions\";\r\n        console.log(`Hitting: ${url}`);\r\n        return axios.post(url,question);\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}